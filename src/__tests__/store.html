<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <script type="importmap">
        {
          "imports": {
            "Elemento": "../../dist/index.js"
          }
        }
    </script>
</head>
<body>
<script type="module">
    import { Elemento, computed, html } from 'Elemento';
    import { store, fetchTodos, addTodo } from './store.js';

    function TodoList() {
        // derive reactive value from the store
        const todos = computed(() => store.todos.value);

        return html`
              <section>
                <h3>Todos</h3>
                ${todos.value?.map(t => html`<p>${t.title}</p>`)}
              </section>`;
    }
    customElements.define('todo-list', Elemento(TodoList));

    function TodoApp() {
        return html`
            <todo-list></todo-list>
            <button @click=${() => addTodo({ title: 'New todo' })}>add todo</button>
          `;
    }
    customElements.define('my-data-button', Elemento(TodoApp));

    fetchTodos();
</script>
<my-data-button></my-data-button>
</body>
</html>